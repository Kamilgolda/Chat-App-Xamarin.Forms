<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <h1>Utrwalanie danych sesji przy użyciu Session Storage</h1>
    <h3>
        Session Storage to mechanizm przeglądarki, który może przechowywać dane tekstowe
        w czasie uruchomionej przeglądarki. Jak sama nazwa wskazuje, dane
        przechowywane są przez okres
        bieżącej sesji użytkownika.
    </h3>
    <h3>
        sprawdzenie, czy przeglądarka implementuje przechowywanie sesji.
        <code>
            if( window.sessionStorage ){
            ...
            }
        </code>
    </h3>
    <h3>
        Pamięć sesji wiąże każdy element danych sesji z unikalną wartością klucza; podajesz tę kluczową wartość
        podczas przechowywania wartości i użyj tej samej wartości klucza, aby pobrać dane. Interfejs API Session Storage zapewnia
        trzy sposoby przechowywania i pobierania danych:
    </h3>
    <h4>
        Funkcje setItem i getItem. Funkcja setItem wymaga podania klucza i danych. Funkcja getItem używa klucza do zwrócenia danych. Jeśli nie ma danych z określonym kluczem,
        zwrócona wartość ma wartość NULL. <br />
        <code>
            sessionStorage.setItem("myKey","some text value");<br />
            var textFromSession = sessionStorage.getItem("myKey");
        </code><br /><br />
        name-key pair. Możesz użyć notacji tablicowej i określić wartość klucza jako indeks tablicowy. <br />
        <code>
            sessionStorage["myKey"] = "some text value"; <br />
            var textFromSession2 = sessionStorage["myKey"];
        </code> <br /> <br />
        pseudo-właściwości. Możesz dodać właściwość dla każdego klucza do obiektu sessionStorage. <br />
        <code>
            sessionStorage.myKey = "some text value"; <br />
            var textFromSession3 = sessionStorage.myKey;
        </code>
    </h4>
    <h3>
        Jeśli chcesz utrwalić obiekty w pamięci sesji, szereguj je jako ciągi JSON, używając
        Funkcja JSON.stringify().
    </h3>
    <h3>
        Obiekty w magazynie sesji są również dostępne jako tablica elementów o długim indeksie. Możesz przetestować
        length, aby dowiedzieć się, ile kluczy znajduje się w obiekcie sessionStorage. Możesz pobrać klucz do
        każdy obiekt za pomocą funkcji key ().
    </h3>
    <textarea rows="6" cols="60">
var listDiv = document.getElementById("myList");
for(var i=0; i<sessionStorage.length; i++)
                                      {
                                      listDiv.innerHTML +="<br />" + sessionStorage.key(i);
                                      }
</textarea>
    <h3>Aby usunąć element z pamięci sesji, użyj metody removeItem(). <code>sessionStorage.removeItem("myKey");</code> </h3>
    <h3>Aby wyczyścić magazyn sesji przed końcem sesji, wywołaj metodę clear(): <code>sessionStorage.clear();</code> </h3>
    <hr />
    <h1>Utrwalanie danych w różnych sesjach za pomocą Local Storage</h1>
    <h3>
        Local Storage umożliwia także przechowywanie elementów danych
        w przeglądarce klienta, ale w przeciwieństwie do przechowywania sesji,
        elementy w magazynie lokalnym są zachowywane nawet po
        zakończonej sesji przeglądarki.
    </h3>
    <h3>
        Interfejs API magazynu lokalnego jest bardzo podobny do interfejsu API Session Storage. Możesz przechowywać i odzyskiwać dane za pomocą
        funkcje setItem () i getItem (), klucz pary nazw lub pseudo-właściwości.
    </h3>
    <h4>
        <code>
            localStorage.setItem("myKey","some text value");<br />
            var textData = localStorage.getItem("myKey");<br />
            localStorage["myKey"] = "some text value";<br />
            var textData = localStorage["myKey"];<br />
            localStorage.myKey = "some text value";<br />
            var textData = localStorage.myKey;
        </code>
    </h4>
    <h3> tak samo jak w Session Storage można użyć pętli odczytującej elementy / tak samo z usuwaniem </h3>
    <h3>
        Podobnie jak w przypadku interfejsu API do przechowywania sesji, powinieneś
        szeregowac obiekty jako tekst za pomocą funkcji JSON.stringify() przed ich zapisaniem.
    </h3>
    <hr />
    <img src="img/data1.png" style="float:right" />
    <h1>Eventy Storage</h1>

    <h3>
        Poniższy przykład pokazuje, śledzenie zmian w Storage.
    </h3>
    <textarea rows="6" cols="80">
function myStorageCallback( e ) {
alert("Key:" + e.key + " changed to " + e.newValue);
}
window.addEventListener("storage", myStorageCallback, true);
</textarea>
    <hr />
    <h1>Przechowywanie danych strukturalnych za pomocą interfejsu API indeksowanej bazy danych</h1>
    <h3>
        Indeksowany interfejs API bazy danych lub IndexedDB,
        zapewnia wydajny mechanizm przechowywania,
        pobieranie i wyszukiwanie przechowywanych danych strukturalnych
        lokalnie na urządzeniu z przeglądarką.
    </h3>
    <h3>
        Przechowujesz dane w nazwanej bazie danych; łączysz się
        do bazy danych poprzez utworzenie obiektu żądania, który
        odwołuje się do funkcji open(). Jeśli baza danych
        nie istnieje, tworzy ją funkcja open().
        Interfejs API IndexedDB jest asynchroniczny i używasz
        Zdarzenie onsuccess, aby przechwycić wartość zwróconą przez
        funkcje takie jak open(). Jeśli funkcja zawiedzie, możesz określić przyczynę niepowodzenia, obsługując
        zdarzenie onerror. Poniższy przykład pokazuje, jak otworzyć bazę danych i uzyskać odwołanie, które możesz
        używać do przechowywania i pobierania danych. Zmienna db zawiera odniesienie do bazy danych, jeśli jest otwarta
        z powodzeniem:
    </h3>
    <textarea rows="10" cols="80">
var db; // Reference to the database to use
var openRequest = indexedDB.open("contosoDB");
openRequest.onsuccess = function(event) {
db = event.target.result;
};
openRequest.onerror = function(event) {
alert("Error " + event.target.errorCode + " occurred while opening the
database");
};
</textarea>
    <h3>
        Baza danych zawiera jedną lub więcej składnic obiektów, które są analogiczne do tabel w relacyjnej bazie danych. ty
        zdefiniuj składnicę obiektów za pomocą funkcji createObjectStore(); określasz obiekt, który chcesz dodać do
        przechowuj wraz z nazwą właściwości klucza, której API IndexedDB może użyć do pobrania obiektu.
        Poniższy przykład tworzy magazyn obiektów do przechowywania danych uczestników konferencji. Obiekt
        store został zainicjowany danymi pierwszego uczestnika - Rachel Valdez. Właściwość id jest kluczem do
        magazyn obiektów:
    </h3>
    <textarea rows="10" cols="80">
var attendee = {
id: "1",
name: "Rachel Valdez",
password: "Pa$$w0rd"
};
var attendeeStore = db.createObjectStore("attendees", { keyPath: "id" });</textarea>
    <h3>
        Za pomocą funkcji add () można przechowywać dodatkowe rekordy w magazynie obiektów. Następny przykład dodaje
        szczegóły dla Erica Gruber do store. Zauważ, że funkcja add () jest asynchroniczna:
    </h3>
    <textarea rows="13" cols="80">
var newAttendee = {
id: "2",
name: "Eric Gruber",
password: "Pa$$w0rd"
};
var addRequest = attendeeStore.add(newAttendee);
addRequest.onsuccess = function(event) {
// Attendee was successfully added
}
addRequest.onerror = function(event) {
// Handle failure
};
</textarea>
    <h3>Aby zmodyfikować istniejący rekord, użyj funkcji put() w następujący sposób:</h3>
    <textarea rows="15" cols="80">
var updatedAttendee = {
id: "2", // Id of existing attendee
name: "Eric Gruber",
password: "P@ssw0rd" // Change the password
};
var updateRequest = attendeeStore.put(updatedAttendee);
updateRequest.onsuccess = function(event) {
// Attendee was successfully updated
}
updateRequest.onerror = function(event) {
// Handle failure
};
</textarea>
    <h3>
        Możesz użyć funkcji delete(), aby usunąć obiekt ze składnicy obiektów. Podaj klucz obiektu
        jako parametr. Jeśli nie ma pasującego obiektu, zgłaszane jest zdarzenie błędu:
    </h3>
    <textarea rows="10" cols="80">
var deleteRequest = attendeeStore.delete("1"); // Remove the details for Rachel
Valdez
deleteRequest.onsuccess = function(event) {
// Attendee was successfully deleted
}
deleteRequest.onerror = function(event) {
// Handle failure
};
</textarea>
    <h3>
        Aby znaleźć dane w magazynie obiektów, możesz użyć funkcji get () i podać klucz obiektu do
        odzyskać. Ponownie, jeśli nie ma pasującego obiektu, wystąpi zdarzenie błędu:
    </h3>
    <textarea rows="10" cols="80">
var attendee;
var getRequest = attendeeStore.get("2"); // Retrieve the details for Eric Gruber
getRequest.onsuccess = function(event) {
// Attendee details are available in event.target.result
attendee = event.target.result;
}
getRequest.onerror = function() {
// Handle failure
};
</textarea>
</body>
</html>